[gd_scene load_steps=9 format=3 uid="uid://f2qsa7pj8chf"]

[ext_resource type="Script" path="res://Scripts/Speedometer.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://duoynlaqtady0" path="res://Objects/TestLevel.tscn" id="2"]
[ext_resource type="PackedScene" uid="uid://jjb7aco38vlb" path="res://Objects/M113.tscn" id="3"]
[ext_resource type="PackedScene" uid="uid://fj1u1fbw8uil" path="res://Objects/CameraRig.tscn" id="4"]
[ext_resource type="PackedScene" uid="uid://dml5adtqv70u6" path="res://Objects/VehicleManager.tscn" id="5"]

[sub_resource type="GDScript" id="1"]
script/source = "extends Node

func _on_ChangeButton_pressed():
	get_tree().change_scene_to_file(\"res://Scenes/level1.tscn\")
"

[sub_resource type="GDScript" id="2"]
script/source = "extends Label

func _process(delta):
	text = \"FPS: %f\" % Performance.get_monitor(Performance.TIME_FPS)
"

[sub_resource type="GDScript" id="3"]
script/source = "extends Label

func _process(delta):
	text = \"Physics frame time (ms): %f\" % (Performance.get_monitor(Performance.TIME_PHYSICS_PROCESS ) * 1000)
"

[node name="gameRoot" type="Node"]

[node name="VehicleManager" parent="." instance=ExtResource("5")]
vehiclePath = NodePath("../M113")

[node name="SceneChanger" type="Node" parent="."]
script = SubResource("1")

[node name="TestLevel" parent="." instance=ExtResource("2")]

[node name="M113" parent="." instance=ExtResource("3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8, -6)
gravity_scale = 2.0
linear_damp = 0.1

[node name="CameraRig" parent="." node_paths=PackedStringArray("_camTarget") instance=ExtResource("4")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, -3, 5, -6)
_camTarget = NodePath("../M113")

[node name="DebugUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1280.0
offset_bottom = 720.0

[node name="VBoxContainer" type="VBoxContainer" parent="DebugUI"]
layout_mode = 0
offset_right = 382.0
offset_bottom = 129.0

[node name="Hint" type="Label" parent="DebugUI/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "Press ` to enable/disable viewing of forces.
Press ESC to restrict/unrestrict mouse to window.
Press R to reset vehicle."

[node name="FPS" type="Label" parent="DebugUI/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "FPS: 0"
script = SubResource("2")

[node name="PhysicsMS" type="Label" parent="DebugUI/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "Physics (ms): 0"
script = SubResource("3")

[node name="ChangeButton" type="Button" parent="DebugUI"]
layout_mode = 1
anchors_preset = -1
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 491.0
offset_top = 7.0
offset_right = 36.0
offset_bottom = -311.0
text = "Change to 4WD vehicle"

[node name="Speedometer" type="Label" parent="." node_paths=PackedStringArray("vehicle")]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -120.0
offset_top = -80.0
offset_right = 120.0
text = "0 KM/H"
script = ExtResource("1")
vehicle = NodePath("../M113")

[connection signal="pressed" from="DebugUI/ChangeButton" to="SceneChanger" method="_on_ChangeButton_pressed"]
